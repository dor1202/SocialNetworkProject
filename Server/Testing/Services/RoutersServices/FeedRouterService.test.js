const FeedRouterService = require('@services/RoutersServices/FeedRouterService');
const MockReq = require('../../MoqReq');
const MockRes = require('../../moqRes');

describe('Manage feed service', () => {
    test('getFeed', async () => {
        const mockReq = MockReq;
        mockReq.body = {center: [42.09655614298597,34.9618336396084]};
        let mockRes = MockRes;
        await FeedRouterService.getFeed(mockReq, mockRes);
        const expected = [{ "Likes": 1, "Description": "bbb", "Id": 1, "TimeStamp": "2021-09-19T10:30:02.049+00:00", "Image": "data:image/jpeg;base64,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", "LocationLan": 34.9618336396084, "LocationLat": 42.09655614298597, "Title": "test", "UserId": 1}];
        expect(mockRes.json).toStrictEqual(expected);
    });

    test('getFeedByParameter', async () => {
        const mockReq = MockReq;
        let dic = {};
        dic.useDate = false;
        dic.FromDate = new Date();
        dic.ToDate = new Date();
        dic.Publisher = 'dor';
        dic.Radius = '';
        dic.ImgTags = '';
        dic.TaggedUsers = '';
        mockReq.body = {center: [42.09655614298597,34.9618336396084], filterData: dic};
        let mockRes = MockRes;
        await FeedRouterService.getFeedByParameter(mockReq, mockRes);
        expect(mockRes.json).toBeDefined();
    });

});
